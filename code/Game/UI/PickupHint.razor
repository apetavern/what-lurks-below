@using System
@using System.Collections.Generic
@using System.Linq
@using BrickJam.Player
@using Sandbox;
@using Sandbox.UI;
@inherits PanelComponent

<root style="font-size: 64px">
    PRESS E TO PICKUP!!!!
</root>

@code
{
    public TimeSince TimeSincePlayerInRange { get; set; }
    private GameObject PickupTarget { get; set; }
    private GameObject Player { get; set; }

    public override void Update()
    {
        base.Update();

        if (Player is null)
            return;

        if (TimeSincePlayerInRange > 1)
            Destroy();
    }

    public override void OnStart()
    {
        base.OnStart();

        Player = Scene.GetAllObjects(true).FirstOrDefault(p => p.Name == "player");

        if (GetComponent<IRootPanelComponent>(true) is not WorldPanel worldPanel)
            return;

        worldPanel.Position = Transform.Position + Vector3.Up * 38f;
    }
}
